<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>From Snowflake Servers to GitOps Nirvana</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A beginner-friendly tour of the declarative stack that actually runs itself.">
  <meta name="keywords" content="GitOps,NixOS,Kubernetes,ArgoCD,Terraform,Docker,DSPy,OPA">
  <meta name="author" content="Jonathan McGuinness">
  <meta name="theme-color" content="#111827">

  <style>
    /* --- Basic page style --- */
    body {
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif;
      line-height:1.6;
      margin:2rem auto;
      max-width:680px;
      padding:0 1rem;
      color:#ffffff;
      background:#111827;
    }
    h1,h2{color:#60a5fa;}
    table{width:100%;border-collapse:collapse;margin:1rem 0;}
    th,td{padding:.5rem;border:1px solid #374151;text-align:left;}
    code{background:#1f2937;padding:.15rem .35rem;border-radius:3px;}
    pre{background:#1f2937;padding:1rem;overflow-x:auto;}
    img{max-width:100%;height:auto;border-radius:6px;}
    a{color:#00ff00;}a:visited{color:#22c55e;}
    html{scroll-behavior:smooth;}

    /* --- Zoom controls --- */
    #zoomCtl{margin:.25rem 0;}
    #zoomCtl button{
      background:#60a5fa;
      color:#111827;
      border:none;
      margin-right:.25rem;
      padding:.25rem .5rem;
      border-radius:4px;
      cursor:pointer;
      font-size:1rem;
    }
    #zoomCtl button:active{transform:scale(.95);}

    /* --- Copy buttons (Kim-style) --- */
    .copy-btn{
      background:transparent;
      border:none;
      cursor:pointer;
      font-size:1rem;
      margin-left:.15rem;
      transition:transform .1s;
    }
    .copy-btn:hover{transform:scale(1.15);}
  </style>
</head>

<body>
  <h1>From Snowflake Servers to GitOps Nirvana</h1>
  <p><em>A beginner-friendly tour of the declarative stack that actually runs itself — 04 Aug 2025</em></p>

  <!-- 1st paragraph + per-link copy buttons -->
  <p>
    You’ve probably heard the buzzwords: GitOps, NoOps, immutable infrastructure. Today I’d like to walk you—step by step—through why these concepts exist and how a small constellation of tools (
    <a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a><button class="copy-btn" onclick="copyUrl('https://git-scm.com/')">📋</button>,
    <a href="https://nixos.org/" target="_blank" rel="noopener">NixOS</a><button class="copy-btn" onclick="copyUrl('https://nixos.org/')">📋</button>,
    <a href="https://docker.com/" target="_blank" rel="noopener">Docker</a><button class="copy-btn" onclick="copyUrl('https://docker.com/')">📋</button>,
    <a href="https://developer.hashicorp.com/terraform/" target="_blank" rel="noopener">Terraform</a><button class="copy-btn" onclick="copyUrl('https://developer.hashicorp.com/terraform/')">📋</button>,
    <a href="https://kubernetes.io/" target="_blank" rel="noopener">Kubernetes</a><button class="copy-btn" onclick="copyUrl('https://kubernetes.io/')">📋</button>,
    <a href="https://argo-cd.readthedocs.io/en/stable/" target="_blank" rel="noopener">ArgoCD</a><button class="copy-btn" onclick="copyUrl('https://argo-cd.readthedocs.io/en/stable/')">📋</button>,
    <a href="https://dspy.ai/" target="_blank" rel="noopener">DSPy</a><button class="copy-btn" onclick="copyUrl('https://dspy.ai/')">📋</button>,
    and a pinch of <a href="https://www.openpolicyagent.org/" target="_blank" rel="noopener">OPA</a><button class="copy-btn" onclick="copyUrl('https://www.openpolicyagent.org/')">📋</button>
    policy-as-code) fit together to create a platform that deploys itself every time you hit <i>merge</i>.
    <button id="copyAllTools" class="copy-btn" title="Copy all tool URLs">📋 All</button>
  </p>

  <hr>

  <!-- ========= ORIGINAL SVG FLOWCHART + ZOOM ========= -->
  <section id="flowchart-wrapper" style="position:relative">
    <!-- zoom buttons -->
    <div id="zoomCtl">
      <button id="zoomIn"  title="Zoom in">🔍+</button>
      <button id="zoomOut" title="Zoom out">🔍-</button>
      <button id="zoomFit" title="Fit to screen">⤧</button>
    </div>

    <!-- Original SVG verbatim (kept inline for brevity) -->
    <!-- Paste the full <svg …> … </svg> block from your first file here -->
    <!-- ↓↓↓ placeholder: replace with your exact SVG content ↓↓↓ -->
    <svg id="export-svg"
         width="100%"
         xmlns="http://www.w3.org/2000/svg"
         class="flowchart"
         viewBox="0 0 2471.890625 872"
         preserveAspectRatio="xMidYMid meet"
         aria-roledescription="flowchart-v2">
      <!-- 1. ORIGINAL STYLES (kept) -->
      <style>
        #export-svg{
          font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif;
          font-size:14px;
          fill:#fff;
        }
        #export-svg .node rect,
        #export-svg .node circle,
        #export-svg .node polygon{
          fill:#111827;
          stroke:#60a5fa;
          stroke-width:2;
        }
        #export-svg .edgePath .path{
          stroke:#00ff00;
          stroke-width:2;
        }
      </style>
      <defs>
        <filter id="drop-shadow" height="130%" width="130%">
          <feDropShadow dx="4" dy="4" stdDeviation="0" flood-opacity="0.06" flood-color="#000"/>
        </filter>
      </defs>

      <!-- ====== ORIGINAL NODES & EDGES (paste your full SVG here) ====== -->
      <!-- For brevity, the ~2 000 lines of SVG are omitted; -->
      <!-- copy the exact <g> … </g> content from your first file. -->
    </svg>
  </section>

  <hr>
  <h2>5. A Day in the Life of a Change</h2>
  <ol>
    <li><strong>Code</strong> – write, commit, push.</li>
    <li><strong>CI Gate</strong> – reproducible build & tests.</li>
    <li><strong>GitOps Sync</strong> – Argo CD rolls it out.</li>
    <li><strong>Observe</strong> – Prometheus & Grafana watch.</li>
  </ol>

  <hr>
  <h2>6. Beginner Take-aways</h2>
  <ul>
    <li>Start small: one service in Git + Argo CD.</li>
    <li>Use NixOS dev shells for parity.</li>
    <li>Add OPA policies early.</li>
    <li>Celebrate every green PR!</li>
  </ul>

  <!--  Asset links + copy button  -->
  <section id="stack-assets">
    <h3>Grab the configs</h3>
    <button onclick="copyAssets()">📋 Copy URLs</button>
    <ol>
      <li><a href="assets/README.md" download>README.md</a></li>
      <li><a href="assets/flake.nix" download>flake.nix</a></li>
      <li><a href="assets/main.tf" download>main.tf</a></li>
      <li><a href="assets/argocd-app.yaml" download>argocd-app.yaml</a></li>
      <li><a href="assets/constraint-template.yaml" download>constraint-template.yaml</a></li>
    </ol>
  </section>

  <hr>
  <h2>7. The Bigger Picture</h2>
  <p>Declarative, Git-driven stacks aren’t tools; they’re a culture.<br>
     When everything is code, knowledge lives in the repo, not in someone’s head.</p>
  <p><strong>Welcome to the Declared World!</strong></p>

  <hr>
  <p style="font-size:.9em;color:#9ca3af;">© 2025 Jonathan McGuinness</p>

  <!-- =========  JAVASCRIPT  ========= -->
  <script>
  /* ---- zoom/pan for SVG ---- */
  (() => {
    const svg   = document.getElementById('export-svg');
    let scale = 1, tx = 0, ty = 0;
    function redraw() {
      svg.style.transformOrigin = '0 0';
      svg.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;
    }
    document.getElementById('zoomIn').onclick  = () => { scale *= 1.25; redraw(); };
    document.getElementById('zoomOut').onclick = () => { scale /= 1.25; redraw(); };
    document.getElementById('zoomFit').onclick = () => { scale = 1; tx = ty = 0; redraw(); };
    svg.addEventListener('wheel', e => { e.preventDefault(); scale *= (e.deltaY < 0 ? 1.25 : 1/1.25); redraw(); });
    let drag = false, lastX, lastY;
    svg.addEventListener('mousedown', e => { drag = true; lastX = e.clientX; lastY = e.clientY; svg.style.cursor = 'grabbing'; });
    window.addEventListener('mousemove', e => {
      if (!drag) return;
      tx += e.clientX - lastX; ty += e.clientY - lastY;
      lastX = e.clientX; lastY = e.clientY;
      redraw();
    });
    window.addEventListener('mouseup', () => { drag = false; svg.style.cursor = 'grab'; });
  })();

  /* ---- copy helpers ---- */
  function copyUrl(url) {
    navigator.clipboard.writeText(url).then(() => {
      const btn = event.target;
      btn.textContent = '✅';
      setTimeout(() => btn.textContent = '📋', 800);
    });
  }
  function copyAssets() {
    const urls = Array.from(document.querySelectorAll('#stack-assets a')).map(a => a.href).join('\n');
    navigator.clipboard.writeText(urls).then(() => {
      const btn = event.target;
      btn.textContent = '✅ Copied!';
      setTimeout(() => btn.textContent = '📋 Copy URLs', 1200);
    });
  }
  /* ---- bulk copy for first paragraph ---- */
  document.getElementById('copyAllTools').addEventListener('click', () => {
    const urls = [
      'https://git-scm.com/',
      'https://nixos.org/',
      'https://docker.com/',
      'https://developer.hashicorp.com/terraform/',
      'https://kubernetes.io/',
      'https://argo-cd.readthedocs.io/en/stable/',
      'https://dspy.ai/',
      'https://www.openpolicyagent.org/'
    ].join('\n');
    navigator.clipboard.writeText(urls).then(() => {
      const btn = document.getElementById('copyAllTools');
      btn.textContent = '✅ Copied!';
      setTimeout(() => btn.textContent = '📋 All', 1200);
    });
  });
  </script>
</body>
</html>
